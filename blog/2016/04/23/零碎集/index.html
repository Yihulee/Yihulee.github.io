<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>零碎集 - Yihulee&#39;s world!</title>
    <meta charset="utf-8" />
    <meta name="author" content="Yihulee" />
    <meta name="description" content="零零碎碎的一些感想" />
    <meta name="keywords" content="python,scheme" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">Yihulee&#39;s world!</a></h1>
        <p>========&gt;易燃又美味！</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/essay/">Essay</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/lishuhuakai">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="Yihulee.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>零碎集</h1>
<p>
<b>C</b> 和 <b>scheme</b> 真是两个极端的范式,学了这两门语言，再去学其他的语言，过程就会简单很多。因为一般来说，其他的语言所涉及的东西不会超过这两种语言所涉及的东西。
</p>

<p>
<b>C</b> 是静态语言的代表，从中演变出了 <b>C++</b> , <b>Java</b>, <b>C#</b> 等一大票的语言，它们在 <b>C</b> 的基础上发展,加上了面向对象的类，加上了很多很多的语法糖。加上了 <b>lisp</b> 里的很多优雅的东西。
<b>scheme</b> 算是动态语言吧，又或者说是函数式的编程语言，表达力强大的无与伦比，今天我看了一下 <b>python</b> 的装饰器，可能没有学过 <b>scheme</b> 之类语言的同学会觉得很神奇，一个函数居然可以动态地产生一个函数，这种特性，在静态语言里是不可以想象的。在静态语言里，所有函数必须事先定义好，然后才可以调用，而在动态语言里，函数是可以动态产生的，或者说可以根据传入参数的不同，而产生的函数就不同：
</p>

<div class="org-src-container">

<pre class="src src-scheme">;; 一个很简单的scheme的例子
(define log
  (lambda (x)
    (lambda (y)
      (printf x)
      (y))))

(define now
  (lambda ()
    (printf "2015-03-25")))
 ;; 下面是测试的例子
((log "execute ") now)
</pre>
</div>

<p>
输出的结果是：
</p>

<div class="org-src-container">

<pre class="src src-sh">execute 2015-03-25
</pre>
</div>

<p>
这种特性，好处特别多，它会使得编程起来特别灵活，这种表达力是静态语言远远达不到的。
 *python* 里面的装饰器其实也就是这么一回事！下面是一个返回函数的函数：
</p>

<div class="org-src-container">

<pre class="src src-python">def log(text):
    def decorator(func):
	def wrapper(*args, **kw):
	    print('%s %s():' % (text, func.__name__))
	    return func(*args, **kw)
	return wrapper
    return decorator
</pre>
</div>

<p>
我们可以这么来使用前面的东西：
</p>

<div class="org-src-container">

<pre class="src src-python">@log("execute")
def now():
    print('2015-03-25')
</pre>
</div>

<p>
我们执行 <b>now()</b>,会得到下面的结果：
</p>

<div class="org-src-container">

<pre class="src src-sh">execute now():
2015-03-25
</pre>
</div>
<p>
上面的 <b>@log</b> 只是看起来比较新鲜而已，其实这玩意只是一个语法糖而已，上面的写法等价于:
</p>
<div class="org-src-container">

<pre class="src src-python">now = log("execute")(now)
</pre>
</div>

<p>
差不多和下面的类似：
</p>

<div class="org-src-container">

<pre class="src src-python"># 首先将'execute'这个文本传入，得到下面的函数
def decorator(func):
	def wrapper(*args, **kw):
	    print('%s %s():' % ('execute', func.__name__))
	    return func(*args, **kw)
	return wrapper
# 然后将now函数传入，得到下面的函数
def wrapper(*args, **kw):
	    print('%s %s():' % ('execute', func.__name__))
	    return now(*args, **kw)
# 这个装饰器的意图也很明显了，先打印一些消息，然后输出现在的时间
</pre>
</div>

<p>
这玩意其实和上面的 <b>scheme</b> 代码大同小异。
</p>

<p>
我个人算是认真学过 <b>C++</b> 的泛型编程，以前觉得 <b>C++</b> 真厉害，居然一个函数可以应对多种不同类型的参数，我个人曾经还发出过感慨，说 <b>Java</b> 的泛型比起 <b>C++</b> 可差远了，而现在，我想说: <b>C++</b> 的泛型，在动态语言里压根就是鸡肋一样的存在! 
</p>


<p>
动态语言里压根就没有参数类型这个说法，这无疑比静态语言要优越许多。
</p>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2016-04-23</span>
        <span title="last modification date" class="post-info">2016-05-25</span>
        <span title="tags" class="post-info"><a href="/tags/python/">python</a></span>
        <span title="author" class="post-info">Yihulee</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div class="ds-thread"></div>
        <script type="text/javascript">
          var duoshuoQuery = {short_name:'lishuhuakai'};
          (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = 'http://static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
          || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
        </script>
      </section>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:Yihulee &lt;at&gt; gmail &lt;dot&gt; com">Yihulee</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
